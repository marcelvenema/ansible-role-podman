---

# Show message
- name: Show action message
  debug:
    msg: "Starting role {{ role_name }}... action: {{ action }}."

# If action variable is not defined, gather status of the service and set action variable
- name: Gather action variable status...
  ansible.builtin.include_tasks: get_status.yml
  when: action is not defined

- name: "Verify valid action {{ action }}..."
  ansible.builtin.assert:
    that:
      - action is defined and action in actions
    fail_msg: "Please provide 'action' {{ actions }}"
    quiet: true

# -------------------------------------------------------

- name: Start install action...
  ansible.builtin.include_tasks: install.yml
  when: action == "install"

- name: Start uninstall action...
  ansible.builtin.include_tasks: uninstall.yml
  when: action == "uninstall"

- name: Start configure action...
  ansible.builtin.include_tasks: configure.yml
  when: action == "configure"

- name: Start update action...
  ansible.builtin.include_tasks: containers.yml
  when: action == "update"

- name: Start start action...
  ansible.builtin.include_tasks: containers.yml
  when: action == "start"

- name: Start stop action...
  ansible.builtin.include_tasks: containers.yml
  when: action == "stop"

- name: Start export_container action...
  ansible.builtin.include_tasks: containers.yml
  when: action == "export_container"

- name: Start export_image action...
  ansible.builtin.include_tasks: images.yml
  when: action == "export_image"
